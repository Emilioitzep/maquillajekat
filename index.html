<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Makeupkat</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #fff0f5; }
    header { background: #ff69b4; color: white; padding: 1rem; text-align: center; }
    .toggle-btn {
      position: fixed; top: 1rem; left: 1rem;
      background: #ff69b4; color: white; border: none; border-radius: 8px;
      padding: 0.5rem 1rem; cursor: pointer; z-index: 1000;
    }
    .productos {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem; padding: 1rem;
    }
    .producto {
      background: white; padding: 1rem; border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center;
    }
    .producto img { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; }
    .producto button {
      margin-top: 0.5rem; padding: 0.5rem 1rem; border: none; border-radius: 8px;
      background: #ff69b4; color: white; cursor: pointer;
    }
    .gestion { display: none; padding: 1rem; background: #fff8fc; }
    .gestion input, .gestion button {
      display: block; width: 100%; margin: 0.5rem 0; padding: 0.5rem;
    }
    .carrito {
      position: fixed; bottom: 0; left: 0; right: 0; background: white;
      padding: 1rem; box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<header><h1>Makeupkat</h1></header>
<button class="toggle-btn" onclick="mostrarGestion()">Gestión</button>

<div class="productos" id="productos"></div>

<div class="gestion" id="gestion">
  <h2>Gestión de productos</h2>
  <input type="text" id="nombre" placeholder="Nombre del producto">
  <input type="number" id="precio" placeholder="Precio Q">
  <input type="text" id="imagen" placeholder="URL de la imagen">
  <button onclick="agregarProducto()">Agregar</button>
  <div id="listaGestion"></div>
</div>

<div class="carrito">
  <h3>Carrito</h3>
  <ul id="carritoLista"></ul>
  <p>Total: Q<span id="total">0.00</span></p>
  <button onclick="finalizarPedido()">Finalizar pedido</button>
</div>

<script>
  const password = "fabiola123";
  let productos = JSON.parse(localStorage.getItem("productos")) || [
    { nombre: "Base Líquida", precio: 120, imagen: "https://via.placeholder.com/200x150" },
    { nombre: "Labial Matte", precio: 50, imagen: "https://via.placeholder.com/200x150" }
  ];
  let carrito = [];

  function renderProductos() {
    const contenedor = document.getElementById("productos");
    contenedor.innerHTML = "";
    productos.forEach(p => {
      const div = document.createElement("div");
      div.className = "producto";
      div.innerHTML = `
        <img src="${p.imagen}">
        <h3>${p.nombre}</h3>
        <p>Q${p.precio.toFixed(2)}</p>
        <button onclick="agregarAlCarrito('${p.nombre}', ${p.precio})">Agregar al carrito</button>
      `;
      contenedor.appendChild(div);
    });
  }

  function agregarAlCarrito(nombre, precio) {
    const existente = carrito.find(p => p.nombre === nombre);
    if (existente) {
      existente.cantidad++;
    } else {
      carrito.push({ nombre, precio, cantidad: 1 });
    }
    renderCarrito();
  }

  function renderCarrito() {
    const lista = document.getElementById("carritoLista");
    lista.innerHTML = "";
    let total = 0;
    carrito.forEach((p, i) => {
      total += p.precio * p.cantidad;
      const li = document.createElement("li");
      li.innerHTML = `${p.nombre} x${p.cantidad} - Q${p.precio * p.cantidad}
        <button onclick="quitarDelCarrito(${i})">X</button>`;
      lista.appendChild(li);
    });
    document.getElementById("total").textContent = total.toFixed(2);
  }

  function quitarDelCarrito(i) {
    carrito.splice(i, 1);
    renderCarrito();
  }

  function finalizarPedido() {
    if (carrito.length === 0) {
      alert("El carrito está vacío.");
      return;
    }
    let mensaje = "Hola! Quiero hacer este pedido:%0A";
    carrito.forEach(p => mensaje += `- ${p.nombre} x${p.cantidad}%0A`);
    let total = carrito.reduce((sum, p) => sum + p.precio * p.cantidad, 0);
    mensaje += `%0ATotal: Q${total.toFixed(2)}`;
    window.open(`https://wa.me/50249080900?text=${mensaje}`, "_blank");
    carrito = [];
    renderCarrito();
  }

  function mostrarGestion() {
    const pass = prompt("Contraseña:");
    if (pass === password) {
      document.getElementById("gestion").style.display = "block";
      renderGestion();
    } else {
      alert("Contraseña incorrecta.");
    }
  }

  function agregarProducto() {
    const nombre = document.getElementById("nombre").value.trim();
    const precio = parseFloat(document.getElementById("precio").value);
    const imagen = document.getElementById("imagen").value.trim();
    if (!nombre || isNaN(precio) || !imagen) return alert("Campos inválidos");
    productos.push({ nombre, precio, imagen });
    localStorage.setItem("productos", JSON.stringify(productos));
    renderProductos();
    renderGestion();
    document.getElementById("nombre").value = "";
    document.getElementById("precio").value = "";
    document.getElementById("imagen").value = "";
  }

  function renderGestion() {
    const lista = document.getElementById("listaGestion");
    lista.innerHTML = "";
    productos.forEach((p, i) => {
      const div = document.createElement("div");
      div.innerHTML = `${p.nombre} - Q${p.precio} <button onclick="borrarProducto(${i})">Borrar</button>`;
      lista.appendChild(div);
    });
  }

  function borrarProducto(i) {
    if (confirm(`¿Borrar "${productos[i].nombre}"?`)) {
      productos.splice(i, 1);
      localStorage.setItem("productos", JSON.stringify(productos));
      renderProductos();
      renderGestion();
    }
  }

  renderProductos();
</script>

</body>
</html>


