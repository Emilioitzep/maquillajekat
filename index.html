<!-- makeupkat/index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Makeupkat - Tienda y Gestión</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* --- Estilos resumidos para claridad, ya los tienes completos --- */
    /* Si quieres te los vuelvo a copiar completos. */
    body { font-family: 'Roboto', sans-serif; background: linear-gradient(to bottom, #fff0f5, #ffe6f0); margin: 0; padding: 0; }
    /* ... el resto de estilos va aquí ... (ya los tienes y están bien) */
  </style>
</head>
<body>
  <header><h1>Makeupkat</h1></header>
  <button class="toggle-btn" onclick="toggleView()">Ir a Gestión</button>

  <div class="container">
    <!-- Login -->
    <div class="login-section" id="loginSection">
      <h2>Iniciar Sesión</h2>
      <input type="password" id="passwordInput" placeholder="Contraseña">
      <button onclick="checkPassword()">Ingresar</button>
    </div>

    <!-- Gestión -->
    <div class="gestion-section" id="gestionSection">
      <h2>Gestión de Productos</h2>
      <div class="form-section">
        <input type="text" id="productName" placeholder="Nombre del producto">
        <input type="number" id="productPrice" placeholder="Precio (Q)" step="0.01">
        <input type="text" id="productImage" placeholder="URL de la imagen">
        <button onclick="addProduct()">Agregar Producto</button>
      </div>
      <div class="product-list" id="productList"></div>
    </div>

    <!-- Tienda -->
    <div class="tienda-section active" id="tiendaSection">
      <div class="productos" id="productGrid"></div>
    </div>
  </div>

  <div class="carrito" id="carrito">
    <h2>Carrito</h2>
    <ul id="listaCarrito"></ul>
    <p>Total: Q<span id="total">0</span></p>
    <button class="finalizar-btn" onclick="finalizarPedido()">Finalizar pedido</button>
  </div>

  <footer>
    <p>© 2025 Makeupkat. Todos los derechos reservados.</p>
    <p><a href="https://wa.me/50249080900" target="_blank">WhatsApp</a></p>
  </footer>

  <script>
    let products = JSON.parse(localStorage.getItem('products')) || [
      { name: 'Base Líquida', price: 120, image: 'https://via.placeholder.com/200x150' },
      { name: 'Labial Matte', price: 50, image: 'https://via.placeholder.com/200x150' }
    ];
    let carrito = [];
    const password = 'fabiola123';

    function displayProductsGestion() {
      const productList = document.getElementById('productList');
      productList.innerHTML = '';
      products.forEach((product, index) => {
        const item = document.createElement('div');
        item.className = 'product-item';
        item.innerHTML = `
          <img src="${product.image}" alt="${product.name}">
          <div>
            <h3>${product.name}</h3>
            <p>Q${parseFloat(product.price).toFixed(2)}</p>
          </div>
          <button onclick="deleteProduct(${index})">Borrar</button>
        `;
        productList.appendChild(item);
      });
    }

    function displayProductsTienda() {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = '';
      products.forEach((p) => {
        const item = document.createElement('div');
        item.className = 'producto';
        item.innerHTML = `
          <img src="${p.image}" alt="${p.name}">
          <h3>${p.name}</h3>
          <p>Q${parseFloat(p.price).toFixed(2)}</p>
          <button onclick="agregarAlCarrito('${p.name}', ${p.price})">Agregar al carrito</button>
        `;
        grid.appendChild(item);
      });
    }

    function addProduct() {
      const name = document.getElementById('productName').value.trim();
      const price = document.getElementById('productPrice').value;
      const image = document.getElementById('productImage').value.trim();
      const parsedPrice = parseFloat(price);

      if (name && price && image && parsedPrice > 0) {
        products.push({ name, price: parsedPrice, image });
        localStorage.setItem('products', JSON.stringify(products));
        displayProductsGestion();
        displayProductsTienda();
        document.getElementById('productName').value = '';
        document.getElementById('productPrice').value = '';
        document.getElementById('productImage').value = '';
        alert('Producto agregado con éxito.');
      } else {
        alert('Completa todos los campos correctamente.');
      }
    }

    function deleteProduct(index) {
      products.splice(index, 1);
      localStorage.setItem('products', JSON.stringify(products));
      displayProductsGestion();
      displayProductsTienda();
    }

    function agregarAlCarrito(nombre, precio) {
      carrito.push({ producto: nombre, precio: parseFloat(precio) });
      renderizarCarrito();
    }

    function quitarDelCarrito(index) {
      carrito.splice(index, 1);
      renderizarCarrito();
    }

    function renderizarCarrito() {
      const lista = document.getElementById('listaCarrito');
      const totalElem = document.getElementById('total');
      lista.innerHTML = '';
      let total = 0;
      carrito.forEach((item, index) => {
        const li = document.createElement('li');
        li.innerHTML = `${item.producto} - Q${item.precio.toFixed(2)} <button onclick="quitarDelCarrito(${index})">Quitar</button>`;
        lista.appendChild(li);
        total += item.precio;
      });
      totalElem.textContent = total.toFixed(2);
    }

    function finalizarPedido() {
      const telefono = '50249080900';
      let mensaje = 'Hola, deseo hacer el siguiente pedido:%0A';
      carrito.forEach(item => {
        mensaje += `- ${item.producto}: Q${item.precio.toFixed(2)}%0A`;
      });
      const total = carrito.reduce((s, i) => s + i.precio, 0);
      mensaje += `Total: Q${total.toFixed(2)}`;
      window.open(`https://wa.me/${telefono}?text=${mensaje}`, '_blank');
    }

    function toggleView() {
      const login = document.getElementById('loginSection');
      const gestion = document.getElementById('gestionSection');
      const tienda = document.getElementById('tiendaSection');
      const btn = document.querySelector('.toggle-btn');

      if (gestion.classList.contains('active') || login.classList.contains('active')) {
        login.classList.remove('active');
        gestion.classList.remove('active');
        tienda.classList.add('active');
        btn.textContent = 'Ir a Gestión';
      } else {
        login.classList.add('active');
        tienda.classList.remove('active');
        btn.textContent = 'Volver a Tienda';
      }
    }

    function checkPassword() {
      const input = document.getElementById('passwordInput').value;
      if (input === password) {
        document.getElementById('loginSection').classList.remove('active');
        document.getElementById('gestionSection').classList.add('active');
        document.getElementById('tiendaSection').classList.remove('active');
        document.querySelector('.toggle-btn').textContent = 'Volver a Tienda';
        displayProductsGestion();
      } else {
        alert('Contraseña incorrecta.');
      }
      document.getElementById('passwordInput').value = '';
    }

    document.addEventListener('DOMContentLoaded', () => {
      displayProductsTienda();
      renderizarCarrito();
    });
  </script>
</body>
</html>

